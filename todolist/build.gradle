plugins {
    id 'io.freefair.lombok' version '4.1.0'
}

apply plugin: 'java'
apply plugin: 'war'

// Grade attributes
group 'com.eara.gia'
version '0.1'               // Identifies project's version through a number scheme

sourceCompatibility = 1.8   // Sets Java version compilation compatibility to 1.8

/** Changing the prohect default layout
sourceSets {
    main {
        java {
            srcDirs = ['src']   // Replaces conventional source code directory with list of different directories
        }
    }

    test {
        java {
            srcDirs = ['test']   // Replaces conventional test source code directory with list of different directories
        }
    }
}*/

buildDir = 'out'  // Changes project output property to directory out

ext {
    javaxServletApiVersion = '3.0.1'
    javaxServletJstlVersion = '1.1.2'
    jUnitVersion = '4.12'
    commonsLangVersion = '3.4'
}

repositories {
    mavenCentral()  // Shortcut notation for configuring Maven Central 2 repository
}

configurations {
    // configuration that holds jars to include in the jar
    compile
}

// In Gradle, dependencies are grouped by configurations. One of the configurations that th Java plugin introduces ins 'compile
dependencies {
    compile group: 'org.apache.commons', name: 'commons-lang3', version: "${commonsLangVersion}"
    providedCompile group: 'javax-servlet', name: 'javax.servlet-api', version: "$javaxServletApiVersion"
    runtime group: 'javax-servlet', name: 'jstl', version: "$javaxServletJstlVersion"
    testCompile group: 'junit', name: 'junit', version: "$jUnitVersion"
}

jar {
    from {
        configurations.compile.collect { it.isDirectory() ? it : zipTree(it)}
    }
    manifest{
        attributes 'Main-Class': 'com.eara.gia.todo.TodoApp'    // Add MAin-Class header to JAR file's manifest
    }
}
